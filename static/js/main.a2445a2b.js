(()=>{"use strict";var e={8881:(e,t,n)=>{n.r(t);var a=n(8464),r=n(9766),o=n(725),u=n(2610),i=n(885),l=n(3936),c=n(6742),s=n(3917),d=n(6743),f=n(5770),p=c.default.create({container:{flex:1,alignItems:"center",padding:10,marginTop:100},button:{width:370,marginTop:10}});const h=function(e){var t=e.navigation,n=(0,r.useState)(""),a=(0,i.default)(n,2),o=a[0],u=a[1],c=(0,r.useState)(""),h=(0,i.default)(c,2),g=h[0],v=h[1];return(0,f.jsxs)(l.default,{style:p.container,children:[(0,f.jsx)(s.Input,{placeholder:"Enter your email",label:"Email",leftIcon:{type:"material",name:"email"},value:o,onChangeText:function(e){return u(e)}}),(0,f.jsx)(s.Input,{placeholder:"Enter your password",label:"Password",leftIcon:{type:"material",name:"lock"},value:g,onChangeText:function(e){return v(e)},secureTextEntry:!0}),(0,f.jsx)(s.Button,{title:"login",style:p.button,onPress:function(){var e=(0,d.getAuth)();(0,d.signInWithEmailAndPassword)(e,o,g).then((function(e){e.user;t.navigate("Chat")})).catch((function(e){alert(e.code,": ",e.message)}))}}),(0,f.jsx)(s.Button,{title:"register",style:p.button,onPress:function(){return t.navigate("Register")}})]})};var g=n(7901),v=n(5012),m=n(6188),y=n(2158),b=(0,m.initializeApp)({apiKey:"AIzaSyBAY8jBtwWqdDXM3ipu3ZEXSJDfqpbCS0A",authDomain:"my-chat-app-6219f.firebaseapp.com",projectId:"my-chat-app-6219f",storageBucket:"my-chat-app-6219f.appspot.com",messagingSenderId:"324296332419",appId:"1:324296332419:web:157a1a87ce0f0ed7acb7b6"}),x=(0,y.getFirestore)(b),j=((0,d.getAuth)(b),n(8921)),w=(0,d.getAuth)();c.default.create({});const O=function(e){var t,n,a,o=e.navigation,u=(0,r.useState)([]),c=(0,i.default)(u,2),d=c[0],p=c[1],h=function(){w.signOut().then((function(){o.navigate("Login")})).catch((function(e){alert(e)}))};(0,r.useLayoutEffect)((function(){o.setOptions({headerLeft:function(){var e;return(0,f.jsx)(l.default,{style:{maginLeft:20},children:(0,f.jsx)(s.Avatar,{rounded:!0,source:{uri:null==(e=w.currentUser)?void 0:e.photoURL}})})},headerRight:function(){return(0,f.jsx)(v.default,{style:{marginRight:10,size:24,color:"black"},name:"logout",onPress:h,children:(0,f.jsx)(g.default,{children:"Logout"})})}})}),[o]),(0,r.useEffect)((function(){}),[]),(0,r.useLayoutEffect)((function(){var e=(0,y.query)((0,y.collection)(x,"chats"),(0,y.orderBy)("createAt","desc"));return(0,y.onSnapshot)(e,(function(e){p(e.docs.map((function(e){return{_id:e.data()._id,createAt:e.data().createAt,text:e.data().text,user:e.data().user,avatar:e.data().user.avatar}})))}),(function(e){alert("Error, app could not retreived any messages."),console.log(e.code,": ",e.message)}))}));var m=(0,r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];p((function(t){return j.GiftedChat.append(t,e)}));var t=e[0],n=t._id,a=t.createAt,r=void 0===a?new Date:a,o=t.text,u=t.user;(0,y.setDoc)((0,y.doc)((0,y.collection)(x,"chats")),{_id:n,createAt:r,text:o,user:u})}),[]);return(0,f.jsx)(j.GiftedChat,{messages:d,showAvatarForEveryMessage:!0,onSend:function(e){return m(e)},user:{_id:null==w||null==(t=w.currentUser)?void 0:t.email,name:null==w||null==(n=w.currentUser)?void 0:n.displayName,avatar:null==w||null==(a=w.currentUser)?void 0:a.photoURL}})};var S=c.default.create({container:{flex:1,alignItems:"center",padding:10,marginTop:100},button:{width:370,marginTop:10}});const E=function(e){var t=e.navigation,n=(0,r.useState)(""),a=(0,i.default)(n,2),o=a[0],u=a[1],c=(0,r.useState)(""),p=(0,i.default)(c,2),h=p[0],g=p[1],v=(0,r.useState)(""),m=(0,i.default)(v,2),y=m[0],b=m[1],x=(0,r.useState)(""),j=(0,i.default)(x,2),w=j[0],O=j[1];return(0,f.jsxs)(l.default,{style:S.container,children:[(0,f.jsx)(s.Input,{placeholder:"Enter your name",label:"Name",leftIcon:{type:"material",name:"badge"},value:o,onChangeText:function(e){return u(e)}}),(0,f.jsx)(s.Input,{placeholder:"Enter your email",label:"Email",leftIcon:{type:"material",name:"email"},value:h,onChangeText:function(e){return g(e)}}),(0,f.jsx)(s.Input,{placeholder:"Enter your password",label:"Password",leftIcon:{type:"material",name:"lock"},value:y,onChangeText:function(e){return b(e)},secureTextEntry:!0}),(0,f.jsx)(s.Input,{placeholder:"Enter your avatar url",label:"Profile Picture",leftIcon:{type:"material",name:"face"},value:w,onChangeText:function(e){return O(e)}}),(0,f.jsx)(s.Button,{title:"register",style:S.button,onPress:function(){var e=(0,d.getAuth)();(0,d.createUserWithEmailAndPassword)(e,h,y).then((function(e){e.user;t.navigate("Chat")})).catch((function(e){var t=e.message;alert(t)}))}})]})};var I=(0,o.default)();const A=function(){return(0,f.jsx)(u.default,{children:(0,f.jsxs)(I.Navigator,{children:[(0,f.jsx)(I.Screen,{name:"Login",component:h}),(0,f.jsx)(I.Screen,{name:"Register",component:E}),(0,f.jsx)(I.Screen,{name:"Chat",component:O})]})})};(0,a.default)(A)}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,(()=>{var e=[];n.O=(t,a,r,o)=>{if(!a){var u=1/0;for(s=0;s<e.length;s++){for(var[a,r,o]=e[s],i=!0,l=0;l<a.length;l++)(!1&o||u>=o)&&Object.keys(n.O).every((e=>n.O[e](a[l])))?a.splice(l--,1):(i=!1,o<u&&(u=o));if(i){e.splice(s--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var s=e.length;s>0&&e[s-1][2]>o;s--)e[s]=e[s-1];e[s]=[a,r,o]}})(),n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(a,r){if(1&r&&(a=this(a)),8&r)return a;if("object"===typeof a&&a){if(4&r&&a.__esModule)return a;if(16&r&&"function"===typeof a.then)return a}var o=Object.create(null);n.r(o);var u={};e=e||[null,t({}),t([]),t(t)];for(var i=2&r&&a;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((e=>u[e]=()=>a[e]));return u.default=()=>a,n.d(o,u),o}})(),n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/",(()=>{var e={179:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var r,o,[u,i,l]=a,c=0;if(u.some((t=>0!==e[t]))){for(r in i)n.o(i,r)&&(n.m[r]=i[r]);if(l)var s=l(n)}for(t&&t(a);c<u.length;c++)o=u[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return n.O(s)},a=self.webpackChunkweb=self.webpackChunkweb||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=n.O(void 0,[519],(()=>n(8881)));a=n.O(a)})();
//# sourceMappingURL=main.a2445a2b.js.map