(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{213:function(e,t,a){e.exports=a(282)},282:function(e,t,a){"use strict";a.r(t);var n=a(305),c=a(0),r=a(304),o=a(303),i=a(16),s=a.n(i),u=a(3),l=a(2),b=a(49),j=a(65),d=a(1),f=l.a.create({container:{flex:1,alignItems:"center",padding:10,marginTop:100},button:{width:370,marginTop:10}}),p=function(e){var t=e.navigation,a=Object(c.useState)(""),n=s()(a,2),r=n[0],o=n[1],i=Object(c.useState)(""),l=s()(i,2),p=l[0],m=l[1];return Object(d.jsxs)(u.a,{style:f.container,children:[Object(d.jsx)(b.c,{placeholder:"Enter your email",label:"Email",leftIcon:{type:"material",name:"email"},value:r,onChangeText:function(e){return o(e)}}),Object(d.jsx)(b.c,{placeholder:"Enter your password",label:"Password",leftIcon:{type:"material",name:"lock"},value:p,onChangeText:function(e){return m(e)},secureTextEntry:!0}),Object(d.jsx)(b.b,{title:"login",style:f.button,onPress:function(){var e=Object(j.b)();Object(j.c)(e,r,p).then((function(e){e.user;t.navigate("Chat")})).catch((function(e){alert(e.code,": ",e.message)}))}}),Object(d.jsx)(b.b,{title:"register",style:f.button,onPress:function(){return t.navigate("Register")}})]})},m=a(17),O=a(21),g=a(199),h=a(66),v=Object(g.a)({apiKey:"AIzaSyBAY8jBtwWqdDXM3ipu3ZEXSJDfqpbCS0A",authDomain:"my-chat-app-6219f.firebaseapp.com",projectId:"my-chat-app-6219f",storageBucket:"my-chat-app-6219f.appspot.com",messagingSenderId:"324296332419",appId:"1:324296332419:web:157a1a87ce0f0ed7acb7b6"}),x=Object(h.c)(v),y=(Object(j.b)(v),a(120)),E=Object(j.b)(),S=(l.a.create({}),function(e){var t,a,n,r=e.navigation,o=Object(c.useState)([]),i=s()(o,2),l=i[0],j=i[1],f=function(){E.signOut().then((function(){r.navigate("Login")})).catch((function(e){alert(e)}))};Object(c.useLayoutEffect)((function(){r.setOptions({headerLeft:function(){var e;return Object(d.jsx)(u.a,{style:{maginLeft:20},children:Object(d.jsx)(b.a,{rounded:!0,source:{uri:null==(e=E.currentUser)?void 0:e.photoURL}})})},headerRight:function(){return Object(d.jsx)(O.a,{style:{marginRight:10,size:24,color:"black"},name:"logout",onPress:f,children:Object(d.jsx)(m.a,{children:"Logout"})})}})}),[r]),Object(c.useEffect)((function(){}),[]),Object(c.useLayoutEffect)((function(){var e=Object(h.f)(Object(h.a)(x,"chats"),Object(h.e)("createAt","desc"));return Object(h.d)(e,(function(e){j(e.docs.map((function(e){return{_id:e.data()._id,createAt:e.data().createAt,text:e.data().text,user:e.data().user,avatar:e.data().user.avatar}})))}),(function(e){alert("Error, app could not retreived any messages."),console.log(e.code,": ",e.message)}))}));var p=Object(c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];j((function(t){return y.a.append(t,e)}));var t=e[0],a=t._id,n=t.createAt,c=void 0===n?new Date:n,r=t.text,o=t.user;Object(h.g)(Object(h.b)(Object(h.a)(x,"chats")),{_id:a,createAt:c,text:r,user:o})}),[]);return Object(d.jsx)(y.a,{messages:l,showAvatarForEveryMessage:!0,onSend:function(e){return p(e)},user:{_id:null==E||null==(t=E.currentUser)?void 0:t.email,name:null==E||null==(a=E.currentUser)?void 0:a.displayName,avatar:null==E||null==(n=E.currentUser)?void 0:n.photoURL}})}),w=l.a.create({container:{flex:1,alignItems:"center",padding:10,marginTop:100},button:{width:370,marginTop:10}}),I=function(e){var t=e.navigation,a=Object(c.useState)(""),n=s()(a,2),r=n[0],o=n[1],i=Object(c.useState)(""),l=s()(i,2),f=l[0],p=l[1],m=Object(c.useState)(""),O=s()(m,2),g=O[0],h=O[1],v=Object(c.useState)(""),x=s()(v,2),y=x[0],E=x[1];return Object(d.jsxs)(u.a,{style:w.container,children:[Object(d.jsx)(b.c,{placeholder:"Enter your name",label:"Name",leftIcon:{type:"material",name:"badge"},value:r,onChangeText:function(e){return o(e)}}),Object(d.jsx)(b.c,{placeholder:"Enter your email",label:"Email",leftIcon:{type:"material",name:"email"},value:f,onChangeText:function(e){return p(e)}}),Object(d.jsx)(b.c,{placeholder:"Enter your password",label:"Password",leftIcon:{type:"material",name:"lock"},value:g,onChangeText:function(e){return h(e)},secureTextEntry:!0}),Object(d.jsx)(b.c,{placeholder:"Enter your avatar url",label:"Profile Picture",leftIcon:{type:"material",name:"face"},value:y,onChangeText:function(e){return E(e)}}),Object(d.jsx)(b.b,{title:"register",style:w.button,onPress:function(){var e=Object(j.b)();Object(j.a)(e,f,g).then((function(e){e.user;t.navigate("Chat")})).catch((function(e){var t=e.message;alert(t)}))}})]})},T=Object(r.a)(),C=function(){return Object(d.jsx)(o.a,{children:Object(d.jsxs)(T.Navigator,{children:[Object(d.jsx)(T.Screen,{name:"Login",component:p}),Object(d.jsx)(T.Screen,{name:"Register",component:I}),Object(d.jsx)(T.Screen,{name:"Chat",component:S})]})})};Object(n.a)(C)}},[[213,1,2]]]);
//# sourceMappingURL=app.032a1790.chunk.js.map